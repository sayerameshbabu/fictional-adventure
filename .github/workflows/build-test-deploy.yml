name: build-test-deploy
on:
  push:
    branches:
      - main
      - feature/*
  workflow_dispatch:
env:
  NODE_ENV: prod
  secret1: ${{ secrets.PROD_ENV_SECRET }}
  secret2: ${{ secrets.REPO_SECRET }}
  secret3: ${{ secrets.PROD_ENV_VARIABLE }}
  secret4: ${{ secrets.REPO_VARIABLE }}
  secret5: ${{ secrets.CODESPACE_REPO_SECRET }}
  secret6: ${{ secrets.DEPENDABOT_REPO_SECRET }}
jobs:
  build:
    env:
      API_URL: https://api.example.com
    name: build job
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: echo $NODE_ENV
      - run: echo $API_URL
      - run: |
          echo $CI
          echo $GITHUB_WORKFLOW
          echo $GITHUB_RUN_ID
          echo $GITHUB_RUN_NUMBER
          echo $GITHUB_ACTION
          echo $GITHUB_ACTIONS
          echo $GITHUB_ACTOR
          echo $GITHUB_REPOSITORY
          echo $GITHUB_EVENT_NAME
          echo $GITHUB_EVENT_PATH
          echo $GITHUB_WORKSPACE
          echo $GITHUB_SHA
          echo $GITHUB_REF
          echo $GITHUB_HEAD_REF
          echo $GITHUB_BASE_REF
          echo $GITHUB_SERVER_URL
          echo $GITHUB_API_URL
          echo $GITHUB_GRAPHQL_URL
          echo $secret1
          echo $secret2
          echo $secret3
          echo $secret4
          echo $secret5
          echo $secret6          
      # - uses: ./.github/actions/setup-node
  #     - name: build the app
  #       run: npm run build
  # # test:
  # #   needs: build
  # #   name: test job
  # #   runs-on: ubuntu-latest
  # #   steps:
  # #     - uses: actions/checkout@v4
  # #     - name: setup nodeJs
  # #       uses: actions/setup-node@v6.0.0
  # #     - name: install npm
  # #       run: npm install
  # #     - name: test the app
  # #       run: npm run test
  # deploy:
  #   needs: build
  #   name: deploy job
  #   runs-on: ubuntu-latest

  #   permissions:
  #     contents: write
  #     pages: write
  #     id-token: write

  #   steps:
  #     - uses: actions/checkout@v4
  #     - uses: actions/setup-node@v4
  #     - uses: actions/configure-pages@v4
  #       with:
  #         static_site_generator: next
  #     - run: npm install
  #     - run: npm run build    
  #     - name: upload artifcats
  #       uses: actions/upload-pages-artifact@v3
  #       with:
  #         path: './out'
  #     - id: deployment
  #       uses: actions/deploy-pages@v4
    
  #   environment: 
  #     name: production
  #     url: ${{ steps.deployment.outputs.page_url }}
      

    
    
